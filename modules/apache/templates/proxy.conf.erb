LoadModule proxy_module ../modules/mod_proxy.so
LoadModule proxy_balancer_module ../modules/mod_proxy_balancer.so

<% if @proxy_type == "ajp" -%>
LoadModule proxy_ajp_module ../modules/mod_proxy_ajp.so
ProxyRequests Off
<% elsif @proxy_type == "ftp" -%>
LoadModule proxy_ftp_module ../modules/mod_proxy_ftp.so
<% elsif @proxy_type == "connect" -%>
LoadModule proxy_connect_module ../modules/mod_proxy_connect.so
<% elsif @proxy_type == "http" -%>
LoadModule proxy_http_module ../modules/mod_proxy_http.so
<% end -%>


<% if @proxy_type == "ajp" -%>
    <proxy balancer://<%= @ajp_balancer %>>
    <% $i = 0 -%>
    <% while $i < @host_name.size do -%>
    BalancerMember ajp://<%= @host_name[$i] %>:<%= @port_name[$i] %> loadfactor=<%= @ajp_loadfactor[$i] %> route=<%= @ajp_route[$i] %>
    <% $i += 1 -%>
    <% end -%>
<% elsif @proxy_type == "ftp" -%>

<% elsif @proxy_type == "connect" -%>

<% elsif @proxy_type == "http" -%>

<% end -%>
</proxy>